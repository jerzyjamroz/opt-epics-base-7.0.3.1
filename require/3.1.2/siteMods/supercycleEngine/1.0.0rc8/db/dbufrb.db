record(subArray, "$(P)$(R=)$(S=:)Databuffer-u32idx0-subA_") {
  field(DTYP, "Soft Channel")
  field(SCAN, "Passive")
  field(INP,  "$(P)$(R=)$(S=:)EngineCycle_.VALB")
  field(INDX, "0")
  field(NELM, "1") # "2046")
  field(MALM, "1") # "2046")
  field(FTVL, "ULONG")
}

record(subArray, "$(P)$(R=)$(S=:)Databuffer-u32idx1-subA_") {
  field(DTYP, "Soft Channel")
  field(SCAN, "Passive")
  field(INP,  "$(P)$(R=)$(S=:)EngineCycle_.VALB")
  field(INDX, "1")
  field(NELM, "1") # "2046")
  field(MALM, "2") # "2046")
  field(FTVL, "ULONG")
}

record(subArray, "$(P)$(R=)$(S=:)Databuffer-u32idx2-subA_") {
  field(DTYP, "Soft Channel")
  field(SCAN, "Passive")
  field(INP,  "$(P)$(R=)$(S=:)EngineCycle_.VALB")
  field(INDX, "2")
  field(NELM, "1") # "2046")
  field(MALM, "3") # "2046")
  field(FTVL, "ULONG")
}

record(subArray, "$(P)$(R=)$(S=:)Databuffer-u32idx3-subA_") {
  field(DTYP, "Soft Channel")
  field(SCAN, "Passive")
  field(INP,  "$(P)$(R=)$(S=:)EngineCycle_.VALB")
  field(INDX, "3")
  field(NELM, "1") # "2046")
  field(MALM, "4") # "2046")
  field(FTVL, "ULONG")
}

record(subArray, "$(P)$(R=)$(S=:)Databuffer-u32idx4-subA_") {
  field(DTYP, "Soft Channel")
  field(SCAN, "Passive")
  field(INP,  "$(P)$(R=)$(S=:)EngineCycle_.VALB")
  field(INDX, "4")
  field(NELM, "1") # "2046")
  field(MALM, "5") # "2046")
  field(FTVL, "ULONG")
}

record(subArray, "$(P)$(R=)$(S=:)Databuffer-u32idx5-subA_") {
  field(DTYP, "Soft Channel")
  field(SCAN, "Passive")
  field(INP,  "$(P)$(R=)$(S=:)EngineCycle_.VALB")
  field(INDX, "5")
  field(NELM, "1") # "2046")
  field(MALM, "6") # "2046")
  field(FTVL, "ULONG")
}

record(subArray, "$(P)$(R=)$(S=:)Databuffer-u32idx6-subA_") {
  field(DTYP, "Soft Channel")
  field(SCAN, "Passive")
  field(INP,  "$(P)$(R=)$(S=:)EngineCycle_.VALB")
  field(INDX, "6")
  field(NELM, "1") # "2046")
  field(MALM, "7") # "2046")
  field(FTVL, "ULONG")
}

record(subArray, "$(P)$(R=)$(S=:)Databuffer-u32idx7-subA_") {
  field(DTYP, "Soft Channel")
  field(SCAN, "Passive")
  field(INP,  "$(P)$(R=)$(S=:)EngineCycle_.VALB")
  field(INDX, "7")
  field(NELM, "1") # "2046")
  field(MALM, "8") # "2046")
  field(FTVL, "ULONG")
}

record(fanout, "$(P)$(R=)$(S=:)DBufRB-FOut_") {
  field(DESC, "Feedback the databuffer records")
  field(SELM, "All")
  field(SCAN, "Passive")
  field(PINI, "RUNNING")
  field(LNK0, "$(P)$(R=)$(S=:)Prot")
  field(LNK1, "$(P)$(R=)$(S=:)IdCycle")
  field(LNK2, "$(P)$(R=)$(S=:)PBState")
  field(LNK3, "$(P)$(R=)$(S=:)PBDest")
  field(LNK4, "$(P)$(R=)$(S=:)PBMod")
  field(LNK5, "$(P)$(R=)$(S=:)PBPresent")
  field(LNK6, "$(P)$(R=)$(S=:)PBLen")
  field(LNK7, "$(P)$(R=)$(S=:)PBEn")
  field(LNK8, "$(P)$(R=)$(S=:)PBCurr")
  field(LNK9, "$(P)$(R=)$(S=:)TgRast")
  field(LNK10, "$(P)$(R=)$(S=:)TgSeg")
}

record(calcout, "$(P)$(R=)$(S=:)ProtNum") {
  field(INPA, "$(P)$(R=)$(S=:)Databuffer-u32idx0-subA_ PP")
  field(SCAN, "Passive")
  field(EGU, "ver")
  field(CALC, "(A>>(0*8))&255")
}

record(calcout, "$(P)$(R=)$(S=:)ProtVer") {
  field(INPA, "$(P)$(R=)$(S=:)Databuffer-u32idx0-subA_ PP")
  field(SCAN, "Passive")
  field(EGU, "ver")
  field(CALC, "(A>>(2*8))&255")
}

record(calcout, "$(P)$(R=)$(S=:)Prot") {
  field(INPA, "$(P)$(R=)$(S=:)ProtNum PP")
  field(INPB, "$(P)$(R=)$(S=:)ProtVer PP")
  field(SCAN, "Passive")
  field(EGU, "ver")
  field(CALC, "A*1000+B")
}

record(int64in, "$(P)$(R=)$(S=:)IdCycle") {
  field(DESC, "ID Cycle")
  field(DTYP, "Soft Channel")
  field(SCAN, "Passive")
  field(EGU, "id")
  field(INP, "$(P)$(R=)$(S=:)Databuffer-u32idx1-subA_ PP")
  alias("$(P)$(R=)$(S=:)Heartbeat")
}

record(calcout, "$(P)$(R=)$(S=:)PBState") {
  field(INPA, "$(P)$(R=)$(S=:)Databuffer-u32idx3-subA_ PP")
  field(SCAN, "Passive")
  field(EGU, "state")
  field(CALC, "(A>>(0*8))&255")
}

record(calcout, "$(P)$(R=)$(S=:)PBDest") {
  field(INPA, "$(P)$(R=)$(S=:)Databuffer-u32idx3-subA_ PP")
  field(SCAN, "Passive")
  field(EGU, "dest")
  field(CALC, "(A>>(1*8))&255")
}

record(calcout, "$(P)$(R=)$(S=:)PBMod") {
  field(INPA, "$(P)$(R=)$(S=:)Databuffer-u32idx3-subA_ PP")
  field(SCAN, "Passive")
  field(EGU, "mod")
  field(CALC, "(A>>(2*8))&255")
}

record(calcout, "$(P)$(R=)$(S=:)PBPresent") {
  field(INPA, "$(P)$(R=)$(S=:)Databuffer-u32idx3-subA_ PP")
  field(SCAN, "Passive")
  field(EGU, "present")
  field(CALC, "(A>>(3*8))&255")
}

record(longin, "$(P)$(R=)$(S=:)PBLen") {
  field(DTYP, "Soft Channel")
  field(SCAN, "Passive")
  field(EGU, "us")
  field(INP, "$(P)$(R=)$(S=:)Databuffer-u32idx4-subA_ PP")
}

record(longin, "$(P)$(R=)$(S=:)PBEn") {
  field(DTYP, "Soft Channel")
  field(SCAN, "Passive")
  field(EGU, "keV")
  field(INP, "$(P)$(R=)$(S=:)Databuffer-u32idx5-subA_ PP")
}

record(longin, "$(P)$(R=)$(S=:)PBCurr") {
  field(DTYP, "Soft Channel")
  field(SCAN, "Passive")
  field(EGU, "uA")
  field(INP, "$(P)$(R=)$(S=:)Databuffer-u32idx6-subA_ PP")
}

record(calcout, "$(P)$(R=)$(S=:)TgRast") {
  field(INPA, "$(P)$(R=)$(S=:)Databuffer-u32idx7-subA_ PP")
  field(SCAN, "Passive")
  field(EGU, "slot")
  field(CALC, "(A>>(0*8))&255")
}

record(calcout, "$(P)$(R=)$(S=:)TgSeg") {
  field(INPA, "$(P)$(R=)$(S=:)Databuffer-u32idx7-subA_ PP")
  field(SCAN, "Passive")
  field(EGU, "seg")
  field(CALC, "(A>>(1*8))&255")
}
